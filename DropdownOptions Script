using System.Collections.Generic;
using System;
using UnityEngine;
using System.IO;
using System.Linq;
using TMPro;

public class DropdownOptions : MonoBehaviour
{
    //Calls list of options from database (currently locally stored)
    string[] colourOptions = File.ReadAllLines(@"C:\Users\Freddie\Desktop\textFiles\colourOptions.txt");

    TMP_Dropdown dropDown;

    void Start()
    {
        List<int> colourIndex = new List<int>();
        using (var reader = new StreamReader(@"C:\Users\Freddie\Desktop\textFiles\userColours.csv"))
        {
            while (!reader.EndOfStream)
            {
                var line = reader.ReadLine();
                var values = line.Split(',');

                colourIndex.Add(Convert.ToInt32(values[1]));
            }
        }

        //Converts array into a usable list
        List<string> dropDownOptions = colourOptions.ToList<string>();

        //Gets the Text Mesh Pro Dropdown object using the script
        dropDown = GetComponent<TMP_Dropdown>();

        //Clears current options
        dropDown.ClearOptions();

        //Adds options from the list
        dropDown.AddOptions(dropDownOptions);

        //Will display based on the user's default colour
        switch (dropDown.name)
        {
            case "Water Dropdown":
                dropDown.value = colourIndex[0];
                break;
            case "Sand Dropdown":
                dropDown.value = colourIndex[1];
                break;
            case "Grass Dropdown":
                dropDown.value = colourIndex[2];
                break;
            case "Hill Dropdown":
                dropDown.value = colourIndex[3];
                break;
            case "Mountain Dropdown":
                dropDown.value = colourIndex[4];
                break;
            default:
                dropDown.value = 0;
                break;
        }

    }
}
